# ChatInput 组件功能说明

## 🚀 新功能特性

### 1. **双重发送方式**
- **点击Send按钮**: 传统的点击发送方式
- **按Enter键**: 按Enter键快速发送消息
- **Shift+Enter**: 支持Shift+Enter输入换行（为未来功能预留）

### 2. **智能输入验证**
- 自动过滤空消息和纯空格消息
- 发送前自动去除首尾空格
- 防止重复发送（加载状态保护）

### 3. **用户体验优化**
- **自动聚焦**: 页面加载后自动聚焦到输入框
- **发送后聚焦**: 发送消息后自动重新聚焦输入框
- **加载状态**: 发送过程中显示加载动画
- **禁用状态**: 支持禁用输入框（如反馈弹窗时）

### 4. **视觉反馈**
- 输入框聚焦时的边框高亮效果
- 按钮状态变化（可用/不可用/加载中）
- 键盘快捷键提示
- 平滑的动画过渡效果

## 🎯 使用方法

### 基本用法
```jsx
import ChatInput from './components/chatinput';

function ChatPage() {
  const handleSend = async (message) => {
    // 处理发送的消息
    console.log('发送消息:', message);
  };

  return (
    <ChatInput 
      onSend={handleSend}
      placeholder="请输入您的问题..."
    />
  );
}
```

### 高级用法
```jsx
<ChatInput 
  onSend={handleSend}
  disabled={isLoading}  // 禁用状态
  placeholder="自定义占位符文本"
/>
```

## ⌨️ 键盘快捷键

| 快捷键 | 功能 |
|--------|------|
| `Enter` | 发送消息 |
| `Shift + Enter` | 输入换行（预留功能） |
| `Tab` | 在输入框和按钮间切换焦点 |

## 🎨 样式定制

组件使用CSS类名进行样式控制：

- `.chat-input-container` - 整个输入区域容器
- `.chat-input-bar` - 输入框和按钮的容器
- `.chat-input-field` - 输入框样式
- `.send-button` - 发送按钮样式
- `.input-hint` - 键盘提示文本

## 🔧 技术实现

### 核心特性
- **React Hooks**: 使用useState、useRef、useEffect管理状态
- **事件处理**: 键盘事件和点击事件的统一处理
- **异步支持**: 支持异步的onSend函数
- **错误处理**: 发送失败时保持用户输入内容
- **无障碍支持**: 添加aria-label等无障碍属性

### 性能优化
- 防抖处理避免重复发送
- 使用useRef避免不必要的重渲染
- 延迟聚焦确保DOM更新完成

## 🚀 未来扩展

### 计划中的功能
- **语音输入**: 支持语音转文字
- **文件上传**: 支持图片和文档上传
- **表情选择**: 内置表情选择器
- **历史记录**: 输入历史记录和自动补全
- **多语言支持**: 国际化支持

### 自定义选项
- 自定义发送按钮图标
- 自定义输入框样式
- 自定义验证规则
- 自定义快捷键配置

## 📱 响应式设计

组件完全响应式，支持：
- 桌面端：完整功能展示
- 平板端：优化触摸体验
- 移动端：适配小屏幕布局

## 🧪 测试建议

### 功能测试
- [ ] Enter键发送消息
- [ ] 点击按钮发送消息
- [ ] 空消息验证
- [ ] 加载状态显示
- [ ] 禁用状态处理
- [ ] 焦点管理

### 兼容性测试
- [ ] Chrome/Edge
- [ ] Firefox
- [ ] Safari
- [ ] 移动端浏览器

---

**开发团队**: Capstone Project Team 8.14  
**最后更新**: 2024年12月

